!function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t():"function"==typeof define&&define.amd?define("JUpload",[],t):"object"==typeof exports?exports.JUpload=t():e.JUpload=t()}(this,function(){return function(e){function t(o){if(n[o])return n[o].exports;var s=n[o]={exports:{},id:o,loaded:!1};return e[o].call(s.exports,s,s.exports,t),s.loaded=!0,s.exports}var n={};return t.m=e,t.c=n,t.p="",t(0)}([function(e,t){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var o=function(){function e(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,n,o){return n&&e(t.prototype,n),o&&e(t,o),t}}(),s=function(){function e(t,o){n(this,e);var s=this;s.$el="string"==typeof t?document.querySelector(t):t,s.settings={maxSize:"",data:{},name:"uploadFileName",accept:"",postUrl:"",onClientLoad:null,onServerProgress:null,onServerReadyStateChange:null,onError:function(e){alert("file upload error code = "+e.code+" message = "+e.message)},onSuccess:function(){console.log("upload success1")},onBeforeClick:function(){return!0}},s.settings=Object.assign(s.settings,o),s.$el.style.cssText="position:relative;";var r=document.createElement("input");r.id="__upload_input__",r.type="file",r.accept=s.settings.accept,r.style.cssText="position:absolute;left:-10000px;top:-10000px;",s.$el.appendChild(r),s.$el.onclick=function(){s.settings.onBeforeClick()&&r.click()},r.onchange=function(){for(var e=r.files.length,t=0;t<e;t++)s.fileHandler(r.files[t])}}return o(e,[{key:"fileHandler",value:function(e){var t=this;if(""!=t.settings.maxSize&&e.size>t.settings.maxSize){var n={code:4001,message:"文件大小超出限制"};return t.settings.onError&&t.settings.onError(n),void console.log(JSON.stringify(n))}if("FileReader"in window){var o=new FileReader;o.onload=function(n){t.settings.onClientLoad&&t.settings.onClientLoad(n,e,o)},o.readAsDataURL(e)}else console.log("FileReader is not defined");var s=new XMLHttpRequest;s.upload.onprogress=function(n){t.settings.onServerProgress&&t.settings.onServerProgress(n,e)},s.onreadystatechange=function(n){t.settings.onServerReadyStateChange&&t.settings.onServerReadyStateChange(n,e,s.readyState),t.settings.onSuccess&&4==s.readyState&&200==s.status&&t.settings.onSuccess(n,e,s.responseText)};var r=t.settings.postUrl;"function"==typeof t.settings.postUrl&&(r=t.settings.postUrl()),s.open("POST",r,!0);var i=new FormData;for(var a in t.settings.data)i.append(a,t.settings.data[a]);i.append(t.settings.name,e),s.send(i)}}]),e}();t.default=s,e.exports=t.default}])});
//# sourceMappingURL=JUpload.js.map