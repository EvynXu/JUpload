!function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t():"function"==typeof define&&define.amd?define("JUpload",[],t):"object"==typeof exports?exports.JUpload=t():e.JUpload=t()}(this,function(){return function(e){function t(o){if(n[o])return n[o].exports;var s=n[o]={exports:{},id:o,loaded:!1};return e[o].call(s.exports,s,s.exports,t),s.loaded=!0,s.exports}var n={};return t.m=e,t.c=n,t.p="",t(0)}([function(e,t){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var o=function(){function e(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,n,o){return n&&e(t.prototype,n),o&&e(t,o),t}}();Object.defineProperty(t,"__esModule",{value:!0});var s=function(){function e(t,o){n(this,e);var s=this;s.$el="string"==typeof t?document.querySelector(t):t,s.settings={maxSize:"",data:{},name:"uploadFileName",accept:"",postUrl:"",onClientLoad:null,onServerProgress:null,onServerReadyStateChange:null,onError:function(e){alert("file upload error code = "+e.code+" message = "+e.message)},onSuccess:function(){console.log("upload success1")},onBeforeClick:function(){return!0}},s.settings=Object.assign(s.settings,o),s.$el.style.cssText="position:relative;";var r=document.createElement("input");r.id="__upload_input__",r.type="file",r.accept=s.settings.accept,r.style.cssText="position:absolute;left:-10000px;top:-10000px;",s.$el.appendChild(r),s.$el.onclick=function(){s.settings.onBeforeClick()&&r.click()},r.onchange=function(){for(var e=r.files.length,t=0;e>t;t++)s.fileHandler(r.files[t])}}return o(e,[{key:"fileHandler",value:function(e){var t=this,n=this;if(""!=n.settings.maxSize&&e.size>n.settings.maxSize){var o={code:4001,message:"文件大小超出限制"};return n.settings.onError&&n.settings.onError(o),void console.log(JSON.stringify(o))}if("FileReader"in window){var s=new FileReader;s.onload=function(o){n.settings.onClientLoad&&n.settings.onClientLoad(o,e,t)},s.readAsDataURL(e)}else console.log("FileReader is not defined");var r=new XMLHttpRequest;r.upload.onprogress=function(t){n.settings.onServerProgress&&n.settings.onServerProgress(t,e)},r.onreadystatechange=function(t){n.settings.onServerReadyStateChange&&n.settings.onServerReadyStateChange(t,e,r.readyState),n.settings.onSuccess&&4==r.readyState&&200==r.status&&n.settings.onSuccess(t,e,r.responseText)};var i=n.settings.postUrl;"function"==typeof n.settings.postUrl&&(i=n.settings.postUrl()),r.open("POST",i,!0);var a=new FormData;for(var l in n.settings.data)a.append(l,n.settings.data[l]);a.append(n.settings.name,e),r.send(a)}}]),e}();t["default"]=s,e.exports=t["default"]}])});
//# sourceMappingURL=JUpload.js.map