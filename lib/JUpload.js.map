{"version":3,"sources":["webpack:///webpack/universalModuleDefinition","webpack:///webpack/bootstrap 0a382b5a2085118132b7","webpack:///./src/jupload.js"],"names":[],"mappings":"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","file":"JUpload.js","sourcesContent":["(function webpackUniversalModuleDefinition(root, factory) {\n\tif(typeof exports === 'object' && typeof module === 'object')\n\t\tmodule.exports = factory();\n\telse if(typeof define === 'function' && define.amd)\n\t\tdefine(\"JUpload\", [], factory);\n\telse if(typeof exports === 'object')\n\t\texports[\"JUpload\"] = factory();\n\telse\n\t\troot[\"JUpload\"] = factory();\n})(this, function() {\nreturn \n\n\n/** WEBPACK FOOTER **\n ** webpack/universalModuleDefinition\n **/"," \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId])\n \t\t\treturn installedModules[moduleId].exports;\n\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\texports: {},\n \t\t\tid: moduleId,\n \t\t\tloaded: false\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.loaded = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(0);\n\n\n\n/** WEBPACK FOOTER **\n ** webpack/bootstrap 0a382b5a2085118132b7\n **/","export default class JUpload{\r\n\tconstructor(el,options){\r\n\t\t//测试分支合并 冲突解决\r\n\t\tlet that = this;\r\n\t\tthat.$el = typeof el == 'string' ? document.querySelector(el) : el;\r\n\t\tthat.settings = {\r\n\t\t\tmaxSize: \"\",\r\n\t\t\tname: \"uploadFileName\",\r\n\r\n\t\t\t/**\r\n\t\t\t * 文件筛选\r\n\t\t\t * audio/* 可以接受所有的音频文件\r\n\t\t\t * video/*\t可以接受所有的视频文件\r\n\t\t\t * image/*\t可以接受所有的图片文件\r\n\t\t\t */\r\n\t\t\taccept: \"\",\r\n\t\t\tpostUrl: \"\",\r\n\t\t\tonClientLoad: null,\r\n\t\t\tonServerProgress: null,\r\n\t\t\tonServerReadyStateChange: null,\r\n\r\n\t\t\tonError: res => {\r\n\t\t\t\talert(`file upload error code = ${res.code} message = ${res.message}`);\r\n\t\t\t},\r\n\t\t\t/**\r\n\t\t\t * 成功回调函数\r\n\t\t\t */\r\n\t\t\tonSuccess: () => {\r\n\t\t\t\tconsole.log(`upload success1`);\r\n\t\t\t},\r\n\t\t\t/**\r\n\t\t\t * 点击事件前验证\r\n\t\t\t * @returns true | false\r\n\t\t\t */\r\n\t\t\tonBeforeClick: () => {\r\n\t\t\t\treturn true;\r\n\t\t\t}\r\n\t\t};\r\n\r\n\t\tthat.settings = Object.assign(that.settings, options);\r\n\r\n\r\n\t\tthat.$el.style.cssText = \"position:relative;\";\r\n\r\n\t\tlet input = document.createElement(\"input\");\r\n\t\tinput.id = \"__upload_input__\";\r\n\t\tinput.type = \"file\";\r\n\t\tinput.accept = that.settings.accept;\r\n\t\tinput.style.cssText = \"position:absolute;left:-10000px;top:-10000px;\";\r\n\r\n\t\tthat.$el.appendChild(input);\r\n\r\n\t\tthat.$el.onclick = () => {\r\n\t\t\tif (that.settings.onBeforeClick()) {\r\n\t\t\t\tinput.click();\r\n\t\t\t}\r\n\t\t};\r\n\t\tinput.onchange = () => {\r\n\t\t\tvar len = input.files.length;\r\n\t\t\tfor(var i = 0 ; i < len ; i++){\r\n\t\t\t\tthat.fileHandler(input.files[i]);\r\n\t\t\t}\r\n\t\t};\r\n\t}\r\n\r\n\tfileHandler(file) {\r\n\t\t\tvar that = this;\r\n\t\t\tif (that.settings.maxSize != '' && file.size > that.settings.maxSize) {\r\n\t\t\t\tvar obj = {\r\n\t\t\t\t\tcode: 4001,\r\n\t\t\t\t\tmessage: \"文件大小超出限制\"\r\n\t\t\t\t};\r\n\t\t\t\tif (that.settings.onError) that.settings.onError(obj);\r\n\t\t\t\tconsole.log(JSON.stringify(obj));\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\r\n\t\t\tif ('FileReader' in window) {\r\n\t\t\t\tvar fileReader = new FileReader();\r\n\t\t\t\tfileReader.onload = e => {\r\n\t\t\t\t\tif (that.settings.onClientLoad) {\r\n\t\t\t\t\t\tthat.settings.onClientLoad(e, file, this);\r\n\t\t\t\t\t}\r\n\t\t\t\t};\r\n\t\t\t\tfileReader.readAsDataURL(file);\r\n\t\t\t} else {\r\n\t\t\t\tconsole.log(\"FileReader is not defined\");\r\n\t\t\t}\r\n\r\n\t\t\tvar xmlHttpRequest = new XMLHttpRequest();\r\n\r\n\t\t\txmlHttpRequest.upload.onprogress = e => {\r\n\t\t\t\tif (that.settings.onServerProgress) {\r\n\t\t\t\t\tthat.settings.onServerProgress(e, file);\r\n\t\t\t\t}\r\n\t\t\t};\r\n\t\t\txmlHttpRequest.onreadystatechange = e => {\r\n\t\t\t\tif (that.settings.onServerReadyStateChange) {\r\n\t\t\t\t\tthat.settings.onServerReadyStateChange(e, file, xmlHttpRequest.readyState);\r\n\t\t\t\t}\r\n\t\t\t\tif (that.settings.onSuccess && xmlHttpRequest.readyState == 4 &&\r\n\t\t\t\t\txmlHttpRequest.status == 200) {\r\n\t\t\t\t\tthat.settings.onSuccess(e, file, xmlHttpRequest.responseText);\r\n\t\t\t\t}\r\n\t\t\t};\r\n\r\n\t\t\tvar url = that.settings.postUrl;\r\n\t\t\tif (typeof that.settings.postUrl === \"function\")\r\n\t\t\t\turl = that.settings.postUrl();\r\n\t\t\txmlHttpRequest.open(\"POST\", url, true);\r\n\r\n\t\t\tvar formData = new FormData();\r\n\t\t\tformData.append(that.settings.name, file);\r\n\t\t\txmlHttpRequest.send(formData);\r\n\t\t}\r\n}\n\n\n/** WEBPACK FOOTER **\n ** ./src/jupload.js\n **/"],"sourceRoot":""}